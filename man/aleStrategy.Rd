% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/aleStrategy.R
\name{aleStrategy}
\alias{aleStrategy}
\title{aleStrategy: Accumulated Local Effects Tree Strategy (R6 class)}
\description{
aleStrategy: Accumulated Local Effects Tree Strategy (R6 class)

aleStrategy: Accumulated Local Effects Tree Strategy (R6 class)
}
\details{
Implements the effectStrategy interface for building and analyzing Accumulated Local Effects (ALE) trees.
This strategy supports data preprocessing, node transformation, heterogeneity calculation,
best split search, tree fitting, and visualization.


This class is used internally by the gadgetTree framework to implement ALE-based
tree growing, splitting, and visualization. It is not intended to be used directly by end users,
but can be instantiated for advanced customization.
}
\examples{
# Example: Fit and plot an ALE tree using aleStrategy and gadgetTree
# (Assuming model and data are prepared)
ale_strat = aleStrategy$new()
tree = gadgetTree$new(strategy = ale_strat, n.split = 2)
tree$fit(model = model, data = data, target.feature.name = "target")
tree$plot(model = model, data = data, target.feature.name = "target")

}
\seealso{
\code{\link{calculate_ale_heterogeneity_cpp}} for the underlying calculation function
}
\section{Super class}{
\code{\link[gadget:effectStrategy]{gadget::effectStrategy}} -> \code{aleStrategy}
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{tree_ref}}{Reference to the associated tree instance.}

\item{\code{model}}{Fitted model object (persistent).}

\item{\code{data}}{Data frame containing all features and the target variable (persistent).}

\item{\code{target.feature.name}}{Character(1). The name of the target feature (persistent).}

\item{\code{n.intervals}}{Integer. Number of intervals for numeric features (persistent).}

\item{\code{predict.fun}}{Function. Prediction function (persistent).}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-aleStrategy-new}{\code{aleStrategy$new()}}
\item \href{#method-aleStrategy-preprocess}{\code{aleStrategy$preprocess()}}
\item \href{#method-aleStrategy-node_transform}{\code{aleStrategy$node_transform()}}
\item \href{#method-aleStrategy-heterogeneity}{\code{aleStrategy$heterogeneity()}}
\item \href{#method-aleStrategy-find_best_split}{\code{aleStrategy$find_best_split()}}
\item \href{#method-aleStrategy-plot}{\code{aleStrategy$plot()}}
\item \href{#method-aleStrategy-fit}{\code{aleStrategy$fit()}}
\item \href{#method-aleStrategy-clean}{\code{aleStrategy$clean()}}
\item \href{#method-aleStrategy-clone}{\code{aleStrategy$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-aleStrategy-new"></a>}}
\if{latex}{\out{\hypertarget{method-aleStrategy-new}{}}}
\subsection{Method \code{new()}}{
Initialize the strategy with name "ale".
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{aleStrategy$new()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-aleStrategy-preprocess"></a>}}
\if{latex}{\out{\hypertarget{method-aleStrategy-preprocess}{}}}
\subsection{Method \code{preprocess()}}{
Preprocess input data to generate the split feature set Z, ALE effect list Y, and grid.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{aleStrategy$preprocess(
  model,
  data,
  target.feature.name,
  n.intervals,
  feature.set = NULL,
  split.feature = NULL,
  predict.fun = NULL
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{model}}{Fitted model object.}

\item{\code{data}}{Data frame containing all features and the target variable.}

\item{\code{target.feature.name}}{Character(1). The name of the target feature in the data to explain.}

\item{\code{n.intervals}}{Integer. Number of intervals for numeric features.}

\item{\code{feature.set}}{Character or NULL. Optional. Subset of features to use for effect calculation. If NULL, all features are used.}

\item{\code{split.feature}}{Character or NULL. Optional. Features to consider for splitting at each node. If NULL, all features are considered.}

\item{\code{predict.fun}}{Function or NULL. Prediction function. If NULL, uses default mlr3-compatible function.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
List. A list with Z (split feature set), Y (ALE effect list), and grid (feature grid).
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-aleStrategy-node_transform"></a>}}
\if{latex}{\out{\hypertarget{method-aleStrategy-node_transform}{}}}
\subsection{Method \code{node_transform()}}{
Transform ALE effects for a specific node (e.g., after splitting).
This method applies node-specific preprocessing including single value handling
and categorical feature recalculation.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{aleStrategy$node_transform(Y, idx, split.feature = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{Y}}{List. List of ALE effect data for each feature.}

\item{\code{idx}}{Integer vector. Indices of samples in the current node.}

\item{\code{split.feature}}{Character(1) or NULL. Name of the feature used for splitting.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
List. List of transformed ALE effects.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-aleStrategy-heterogeneity"></a>}}
\if{latex}{\out{\hypertarget{method-aleStrategy-heterogeneity}{}}}
\subsection{Method \code{heterogeneity()}}{
Calculate the heterogeneity (variance of ALE derivatives) within the node.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{aleStrategy$heterogeneity(Y)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{Y}}{List. List of ALE effect data.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Numeric. Numeric vector, heterogeneity for each feature.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-aleStrategy-find_best_split"></a>}}
\if{latex}{\out{\hypertarget{method-aleStrategy-find_best_split}{}}}
\subsection{Method \code{find_best_split()}}{
Find the best split point for a node based on ALE heterogeneity reduction.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{aleStrategy$find_best_split(Z, Y, min.node.size, n.quantiles)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{Z}}{Data frame. Split feature set.}

\item{\code{Y}}{List. ALE effect data.}

\item{\code{min.node.size}}{Integer(1). Minimum node size.}

\item{\code{n.quantiles}}{Integer(1) or NULL. Number of quantiles to use for candidate split points (for numeric features).}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
List. List with best split feature, split point, etc.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-aleStrategy-plot"></a>}}
\if{latex}{\out{\hypertarget{method-aleStrategy-plot}{}}}
\subsection{Method \code{plot()}}{
Visualize the ALE tree structure and ALE plots for each node.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{aleStrategy$plot(
  tree,
  model,
  data,
  target.feature.name,
  depth = NULL,
  node.id = NULL,
  features = NULL,
  ...
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{tree}}{List. Tree structure as a list of Node objects.}

\item{\code{model}}{Fitted model object.}

\item{\code{data}}{Data frame. Data frame.}

\item{\code{target.feature.name}}{Character(1). Target feature name.}

\item{\code{depth}}{Integer or NULL. Depth(s) to visualize (optional).}

\item{\code{node.id}}{Integer or NULL. Node id(s) to visualize (optional).}

\item{\code{features}}{Character or NULL. Features to visualize (optional).}

\item{\code{...}}{Additional plotting arguments.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
List. List of ggplot2 objects for different depths and nodes.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-aleStrategy-fit"></a>}}
\if{latex}{\out{\hypertarget{method-aleStrategy-fit}{}}}
\subsection{Method \code{fit()}}{
Fit an ALE tree using the provided data and model.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{aleStrategy$fit(
  tree,
  model,
  data,
  target.feature.name,
  n.intervals,
  feature.set = NULL,
  split.feature = NULL,
  predict.fun = NULL
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{tree}}{gadgetTree object. Tree object instance.}

\item{\code{model}}{Fitted model object.}

\item{\code{data}}{Data frame. Data frame.}

\item{\code{target.feature.name}}{Character(1). Target feature name.}

\item{\code{n.intervals}}{Integer. Number of intervals for numeric features.}

\item{\code{feature.set}}{Character or NULL. Feature subset (optional).}

\item{\code{split.feature}}{Character or NULL. Split feature (optional).}

\item{\code{predict.fun}}{Function or NULL. Prediction function (optional).}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
gadgetTree object, invisibly. The fitted tree object.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-aleStrategy-clean"></a>}}
\if{latex}{\out{\hypertarget{method-aleStrategy-clean}{}}}
\subsection{Method \code{clean()}}{
Clean up large objects (data, model) after fitting to save memory.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{aleStrategy$clean()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-aleStrategy-clone"></a>}}
\if{latex}{\out{\hypertarget{method-aleStrategy-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{aleStrategy$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
