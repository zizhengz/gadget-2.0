% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_ale.R
\name{calculate_ale}
\alias{calculate_ale}
\title{Calculate Accumulated Local Effects (ALE)}
\usage{
calculate_ale(
  model,
  data,
  feature.set,
  target.feature.name,
  n.intervals = 10,
  predict.fun = NULL
)
}
\arguments{
\item{model}{Fitted model object. The model should have a predict method.}

\item{data}{Data frame. Training data containing features and target variable.}

\item{target.feature.name}{Character. Name of the target variable in the data.}

\item{n.intervals}{Integer. Number of intervals for numeric features (default: 10).}

\item{predict.fun}{Function. Required prediction function that takes (model, data) and returns predictions.}

\item{S}{Character vector. Names of features to compute ALE effects for. If NULL, computes for all features.}
}
\value{
List. Named list where each element corresponds to a feature and contains:
  \item{feat.val}{Original feature values}
  \item{x.left}{Left boundary of interval (for numeric) or lower category (for factors)}
  \item{x.right}{Right boundary of interval (for numeric) or upper category (for factors)}
  \item{dL}{Local effect (finite difference)}
  \item{interval.index}{Index of interval/category}
  \item{interval.width}{Width of interval (1 for categorical features)}
}
\description{
This function computes Accumulated Local Effects (ALE) data at the sample level.
It calculates local finite differences for each data point across specified features.
The output can be used for tree splitting, visualization, or other ALE-based analyses.
}
\details{
For numeric features, the function:
1. Creates n.intervals equal-frequency intervals based on quantiles
2. Assigns each data point to an interval
3. Computes finite differences between interval boundaries

For categorical features, the function:
1. Orders categories by their numeric encoding
2. Computes differences between adjacent categories
3. Uses boundary interpolation for edge categories

The resulting data retains sample-level information, including the ability to
subset by row indices and calculate node-specific heterogeneity measures.
This makes it suitable for various downstream applications including tree splitting.
}
