% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/order_categorical_levels.R
\name{order_categorical_levels}
\alias{order_categorical_levels}
\title{Order Levels of a Categorical Feature}
\usage{
order_categorical_levels(
  x.cat,
  data,
  feature,
  target.feature.name,
  order.method = "mds"
)
}
\arguments{
\item{x.cat}{Factor. Focal feature values; must be \code{droplevels()}-ed so
unused levels are dropped.}

\item{data}{Data frame or data.table. Full dataset including the target column.}

\item{feature}{Character. Name of the focal categorical feature (column in \code{data}).}

\item{target.feature.name}{Character. Name of the target column; excluded from
\dQuote{other features} when building the distance matrix.}

\item{order.method}{Character. How to turn the level-distance matrix into an order:
\code{"mds"} (default, 1D classic MDS), \code{"pca"} (first PC),
\code{"random"} (random permutation), or \code{"raw"} (keep existing level order).}
}
\value{
Factor with the same length and values as \code{x.cat}, with
  \code{levels} reordered and \code{ordered = TRUE}. If \code{nlevels(x.cat) <= 1}
  or there are no other features, returns \code{x.cat} unchanged.
}
\description{
Computes a data-driven ordering of factor levels from other features, then
returns the factor with levels reordered. Intended for use in effect/split
strategies (e.g. ALE, PD) so categories are ordered by similarity rather than
alphabetically or by appearance.
}
\details{
For each pair of levels, a distance is computed from all other features
(all columns in \code{data} except \code{feature} and \code{target.feature.name}):
\itemize{
  \item Numeric: sum over features of max absolute difference of ECDFs (KS-style).
  \item Categorical: sum over features of L1 distance of conditional level distributions.
}
The \eqn{K \times K} distance matrix is embedded in 1D via \code{order.method};
that 1D order defines the new level order. Single-level factors or no other
features yield \code{x.cat} unchanged.
}
