% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_split_data_ale.R
\name{prepare_split_data_ale}
\alias{prepare_split_data_ale}
\title{Prepare ALE Data for Tree Splitting}
\usage{
prepare_split_data_ale(
  model,
  data,
  target.feature.name,
  n.intervals,
  feature.set = NULL,
  split.feature = NULL,
  predict.fun = NULL
)
}
\arguments{
\item{model}{Fitted model object. The model should have a predict method.}

\item{data}{Data frame. Training data containing features and target variable.}

\item{target.feature.name}{Character. Name of the target variable in the data.}

\item{feature.set}{Character vector or NULL. Features to compute ALE effects for.
If NULL, computes for all features. Will validate that all specified features exist.}

\item{split.feature}{Character vector or NULL. Features to consider for splitting.
If NULL, all features are considered for splitting. Will validate that all specified features exist.}

\item{predict.fun}{Function or NULL. Prediction function that takes (model, data) and returns predictions.
If NULL, uses default mlr3-compatible prediction function.}

\item{h}{Integer. Number of intervals for numeric features (default: 10).}
}
\value{
List with the following components:
  \item{Z}{Data frame of split features (numeric)}
  \item{Y}{List of ALE effect data for each feature}
  \item{grid}{List of feature value grids}
}
\description{
This function computes ALE effects and prepares the data structure needed for
ALE-based tree splitting. It includes robust feature validation and handles
both feature.set and split.feature parameters with proper error checking.
}
\details{
This function performs the following steps:
1. Validates that all specified features exist in the data
2. Computes ALE effects using calculate_ale()
3. Prepares split feature set Z with proper type conversion
4. Extracts feature grids from ALE effect data

The function includes robust error handling that will stop execution with
informative messages if any specified features are not found in the data.
}
\examples{
\dontrun{
# Basic usage with all features
result = prepare_split_data_ale(model, data, "target")

# With specific feature sets
result = prepare_split_data_ale(model, data, "target",
                               feature.set = c("x1", "x2"),
                               split.feature = c("x1", "x2", "x3"))
}

}
