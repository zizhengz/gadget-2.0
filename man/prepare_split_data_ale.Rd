% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_split_data_ale.R
\name{prepare_split_data_ale}
\alias{prepare_split_data_ale}
\title{Prepare ALE Data for Tree Splitting}
\usage{
prepare_split_data_ale(
  model,
  data,
  target.feature.name,
  n.intervals,
  feature.set = NULL,
  split.feature = NULL,
  predict.fun = NULL,
  order.method = "mds"
)
}
\arguments{
\item{model}{Fitted model object with a predict interface.}

\item{data}{Data frame or data.table. Training data (features and target).}

\item{target.feature.name}{Character. Name of the target variable.}

\item{n.intervals}{Integer. Number of intervals for numeric ALE (default 10).}

\item{feature.set}{Character or NULL. Features to compute ALE for; NULL = all.}

\item{split.feature}{Character or NULL. Features to consider for splitting; NULL = all.}

\item{predict.fun}{Function or NULL. \code{function(model, data)} returning predictions; NULL uses mlr3-style default.}

\item{order.method}{Character. How to order categorical levels: \code{"mds"},
\code{"pca"}, \code{"random"}, or \code{"raw"} (keep existing factor level order;
default \code{"mds"}).}
}
\value{
List with:
  \item{Z}{data.table of split features (columns in \code{split.feature}).}
  \item{Y}{List of ALE effect data per feature (from \code{calculate_ale}).}
}
\description{
Validates features, converts character columns to ordered factors, builds the
split-feature matrix Z, and computes ALE effects for tree splitting.
}
\details{
Steps performed:
\enumerate{
  \item Resolve and validate \code{feature.set} and \code{split.feature} against \code{colnames(data)}.
  \item For \code{union(feature.set, split.feature)}, convert character columns to factor and order levels via \code{order_categorical_levels} (using \code{droplevels} internally).
  \item Build \code{Z} as \code{data[split.feature]} (data.table).
  \item Call \code{calculate_ale(model, data, feature.set, ...)} to get \code{Y}.
}
Stops with an error if any requested feature is missing from \code{data}.
}
\examples{
\dontrun{
result = prepare_split_data_ale(model, data, "y", n.intervals = 10)
result = prepare_split_data_ale(model, data, "y", n.intervals = 10,
  feature.set = c("x1", "x2"), split.feature = c("x1", "x2", "x3"))
}

}
